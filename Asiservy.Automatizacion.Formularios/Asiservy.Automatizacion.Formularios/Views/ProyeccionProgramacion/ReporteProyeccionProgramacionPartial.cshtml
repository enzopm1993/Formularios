@model IEnumerable<Asiservy.Automatizacion.Datos.Datos.spConsultaProyeccionProgramacion>

@using System.Globalization;

@{
    /**/
    CultureInfo ci = new CultureInfo("Es-Es");
}

<table class="table-hover table-bordered table-striped table" style="cursor: pointer" id="tblDataTable">
    <thead>
        <tr>
            <th>
                <label>Id</label>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Lote)
            </th>
            <th>
                <label>Barco</label>
            </th>
            <th>
                <label>Marea</label>
            </th>
            <th>
                <label>Orden</label>
            </th>
            <th>
                <label>Kilos</label>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Lineas)
            </th>
            <th>
                <label>Proceso Inicio</label>
            </th>
            <th>
                <label>Proceso Fin</label>

            </th>
            <th>
                @Html.DisplayNameFor(model => model.Destino)
            </th>

            <th>
                <label>Limpieza</label>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Especie)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Talla)
            </th>
            <th>
                <label>Temperatura</label>
            </th>
            <th>
                <label>Cooción Inicio</label>
            </th>
            <th>
                <label>Cooción Fin</label>

            </th>
            <th>
                <label>Coches</label>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Cocina)
            </th>
            <th>
                <label>Evicerado Inicio</label>

            </th>
            <th>
                <label>Evicerado Fin</label>

            </th>
            <th>
                <label>Descongelado Inicio</label>

            </th>
            <th>
                <label>Descongelado Fin</label>
            </th>
            <th>
                <label>Receta</label>
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Requerimiento)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Observacion)
            </th>
            <th>
                <label>Fecha Ingreso</label>
            </th>
            <th>
                <label>Usario Ingreso</label>
            </th> 
            <th>
                <label>Fecha Modificacion</label>
            </th>            
            <th>
                <label>Usuario Modificacion</label>
            </th>
          

        </tr>
    </thead>
    <tbody>
        @{ 
            TimeSpan timespan;
            DateTime time;
            string displayTime;
            int i = 1;
            int totalKilos = 0;
            int totalCoches = 0;
        }
        @foreach (var item in Model)
        {
        <tr>
            <td>
                @i
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.Lote)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Barco)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Marea)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.OrdenFabricacion)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Toneladas)
                @{
                    totalKilos = totalKilos + item.Toneladas??0;
                 }
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Lineas)
            </td>
            <td>
                @{
                    if (item.HoraProcesoInicio != null)
                    {
                        timespan = item.HoraProcesoInicio ?? new TimeSpan();
                        time = DateTime.Today.Add(timespan);
                        displayTime = time.ToString("hh:mm tt");
                    }
                    else
                    {
                        displayTime = "";
                    }
                }
                <label>@displayTime</label>
                @*@Html.DisplayFor(modelItem => item.HoraProcesoInicio)*@
            </td>
            <td>
                @{
                    if (item.HoraProcesoFin != null)
                    {
                        timespan = item.HoraProcesoFin ?? new TimeSpan();
                        time = DateTime.Today.Add(timespan);
                        displayTime = time.ToString("hh:mm tt");
                    }
                    else
                    {
                        displayTime = "";
                    }
                }
                <label>@displayTime</label>
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.Destino)
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.TipoLimpieza)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Especie)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Talla)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.TemperaturaFinal)
            </td>
            <td>
                @{
                    if (item.HoraCoccionInicio != null)
                    {
                        timespan = item.HoraCoccionInicio ?? new TimeSpan();
                        time = DateTime.Today.Add(timespan);
                        displayTime = time.ToString("hh:mm tt");
                    }
                    else
                    {
                        displayTime = "";
                    }
                }
                <label>@displayTime</label>
            </td>
            <td>
                @{
                    if (item.HoraCoccionFin != null)
                    {
                        timespan = item.HoraCoccionFin ?? new TimeSpan();
                        time = DateTime.Today.Add(timespan);
                        displayTime = time.ToString("hh:mm tt");
                    }
                    else
                    {
                        displayTime = "";
                    }
                }
                <label>@displayTime</label>
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.TotalCoches)
                @{
                    totalCoches = totalCoches + item.TotalCoches ?? 0;
                }
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Cocina)
            </td>
            <td>
                @{
                    if (item.HoraEviceradoInicio != null)
                    {
                        timespan = item.HoraEviceradoInicio ?? new TimeSpan();
                        time = DateTime.Today.Add(timespan);
                        displayTime = time.ToString("hh:mm tt");
                    }
                    else
                    {
                        displayTime = "";
                    }
                }
                <label>@displayTime</label>
            </td>
            <td>
                @{
                    if (item.HoraEviceradoFin != null)
                    {
                        timespan = item.HoraEviceradoFin ?? new TimeSpan();
                        time = DateTime.Today.Add(timespan);
                        displayTime = time.ToString("hh:mm tt");
                    }
                    else
                    {
                        displayTime = "";
                    }
                }
                <label>@displayTime</label>
            </td>
            <td>
                @{
                    if (item.HoraDescongeladoInicio != null)
                    {
                        timespan = item.HoraDescongeladoInicio ?? new TimeSpan();
                        time = DateTime.Today.Add(timespan);
                        displayTime = time.ToString("hh:mm tt");
                    }
                    else
                    {
                        displayTime = "";
                    }
                }
                <label>@displayTime</label>
            </td>
            <td>
                @{
                    if (item.HoraDescongeladoFin != null)
                    {
                        timespan = item.HoraDescongeladoFin ?? new TimeSpan();
                        time = DateTime.Today.Add(timespan);
                        displayTime = time.ToString("hh:mm tt");
                    }
                    else
                    {
                        displayTime = "";
                    }
                }
                <label>@displayTime</label>
            </td>
            <td>
                @{
                    if (item.Requerimiento != null)
                    {
                        timespan = item.Requerimiento ?? new TimeSpan();
                        time = DateTime.Today.Add(timespan);
                        displayTime = time.ToString("hh:mm tt");
                    }
                    else
                    {
                        displayTime = "";
                    }
                }
                <label>@displayTime</label>
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Observacion)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.RecetaRoceado)

            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FechaIngresoLog)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.UsuarioIngresoLog)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FechaModificacionLog)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.UsuarioModificacionLog)
            </td>
        </tr>
            i++;
        }
      
    </tbody>
    <tfoot>
        <tr>
            <td style="display: none;"></td>
            <td colspan="2"><b>Total</b></td>
            <td></td>
            <td></td>
            <td></td>
            <td><b> @totalKilos KG</b></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td><b>@totalCoches</b></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>

        </tr>

    </tfoot>
</table>
