@model IEnumerable<Asiservy.Automatizacion.Datos.Datos.spConsultaReporteRendimientoLote>

<table class="table table-bordered" id="tblDataTable">
    <thead>
        <tr>
            <th rowspan="2">
                @Html.DisplayNameFor(model => model.Lote)
            </th>
            <th rowspan="2">
                @Html.DisplayNameFor(model => model.Especie)
            </th>
            <th rowspan="2">
                @Html.DisplayNameFor(model => model.Talla)
            </th>
            <th rowspan="2" style="white-space:normal">
                Peso Lote
            </th>

            <th rowspan="2">
                @Html.DisplayNameFor(model => model.Barco)
            </th>
            <th rowspan="2">
                @Html.DisplayNameFor(model => model.Turno)
            </th>
            <th colspan="6" class="text-center">LOMO</th>
            <th colspan="6" class="text-center">MIGA</th>
            <th colspan="6" class="text-center">TOTAL</th>



            <th rowspan="2">
                Limpieza
            </th>
            <th rowspan="2">
                Corte Cocción
            </th>
            <th rowspan="2" style="white-space:normal">
               Receta Roceado
            </th>
            <th rowspan="2" style="white-space:normal">
                Destino Preliminar
            </th>
            <th rowspan="2" style="white-space:normal">
               Total Coches
            </th>
            <th rowspan="2">
               Talla Promedio
            </th>
        </tr>

        <tr>


            <th>
                Kg Real
            </th>
            <th>
                Kg Std
            </th>
            <th>
                Kg Dif
            </th>
            <th>
                % Real
            </th>
            <th>
                % Std
            </th>
            <th>
                % Dif
            </th>


            <th>
                Kg Real
            </th>
            <th>
                Kg Std
            </th>
            <th>
                Kg Dif
            </th>
            <th>
                % Real
            </th>
            <th>
                % Std
            </th>
            <th>
                % Dif
            </th>

            <th>
                Kg Real
            </th>
            <th>
                Kg Std
            </th>
            <th>
                Kg Dif
            </th>
            <th>
                % Real
            </th>
            <th>
                % Std
            </th>
            <th>
                % Dif
            </th>


        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            decimal totalReal = item.KiloRealLomo ?? 0 + item.KiloRealMiga ?? 0;
            decimal totalStd = item.KiloSdtLomo ?? 0 + item.KiloSdtMiga ?? 0;
            decimal totalDif = totalReal - totalStd;

            decimal totalRealPorcentaje = item.KiloRealLomoPorcentaje ?? 0 + item.KiloRealMigaPorcentaje ?? 0;
            decimal totalStdPorcentaje = item.KiloStdLomoPorcentaje ?? 0 + item.KiloStdMigaPorcentaje ?? 0;
            decimal totalDifPorcentaje = totalRealPorcentaje - totalStdPorcentaje;

            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Lote)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Especie)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Talla)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PesoLote)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Barco)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Turno)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.KiloRealLomo)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.KiloSdtLomo)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.KiloDiferenciaLomo)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.KiloRealLomoPorcentaje)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.KiloStdLomoPorcentaje)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.KiloDiferenciaLomoPorcentaje)
                    @if (item.KiloDiferenciaLomoPorcentaje >= 0)
                    {
                        <i class="fas fa-arrow-circle-up" style="background:#4cff00; border-radius:10px"></i>
                    }
                    else
                    {
                        <i class="fas fa-arrow-circle-down" style="background:#ff0000 ; border-radius:10px"></i>
                    }

                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.KiloRealMiga)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.KiloSdtMiga)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.KiloDiferenciaMiga)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.KiloRealMigaPorcentaje)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.KiloStdMigaPorcentaje)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.KiloDiferenciaMigaPorcentaje)
                    @if (item.KiloDiferenciaMigaPorcentaje >= 0)
                    {
                        <i class="fas fa-arrow-circle-up" style="background:#4cff00; border-radius:10px"></i>
                    }
                    else
                    {
                        <i class="fas fa-arrow-circle-down" style="background:#ff0000 ; border-radius:10px"></i>
                    }
                </td>
                <td>@totalReal</td>
                <td>@totalStd</td>
                <td>@totalDif</td>
                <td>@totalRealPorcentaje</td>
                <td>@totalStdPorcentaje</td>
                <td>
                    @totalDifPorcentaje
                    @if (totalDifPorcentaje >= 0)
                    {
                        <i class="fas fa-arrow-circle-up" style="background:#4cff00; border-radius:10px"></i>
                    }
                    else
                    {
                        <i class="fas fa-arrow-circle-down" style="background:#ff0000 ; border-radius:10px"></i>
                    }

                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.TipoLimpieza)
                </td>
                <td>
                    @if (item.CorteCoccion != null)
                    {
                        @item.CorteCoccion.Value.ToString("yyyy-MM-dd HH:mm")
                    }
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.RecetaRoceado)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DestinoPreliminar)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TotalCoche)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TallaPromedio)
                </td>

            </tr>
        }
    </tbody>
</table>
